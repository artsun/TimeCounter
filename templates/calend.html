{% extends "base.html" %}


{% block show %}


    <div class="col-4">
        <div id="myCalendar" class="vanilla-calendar"></div>
    </div>
    <div class="col-4">
        Осталось сегодня
        <div id="MyClockDisplay" class="clock-dyn" onload="checkPause()"></div>
        <br>
        {% if today %}
            <div id="start" value="{{(today.start.now()-today.start).seconds}}">
                Начало {{today.start.strftime('%H')}}:{{today.start.strftime('%M')}}:{{today.start.strftime('%S')}}
                | {{today.start.day}} {{show_month}}
            </div>
        <br>
            <div id="fin" value="{{(today.stop-today.start).seconds}}">
                Финиш {{today.stop.strftime('%H')}}:{{today.stop.strftime('%M')}}:{{today.stop.strftime('%S')}}
                | {{today.stop.day}} {{show_month}}
            </div>
        {%endif%}
        <br>
        <br>
        <div id="Breaks"></div>
        {% if today and today.done%}
        <br>
            Продолжительность составила: {{today.duration}}
            {% if breaks_sum %}
                <br>
                при этом, суммарно перерывов на: {{ breaks_sum }}
            {%endif%}
        {%endif%}
    </div>


    <div class="col-3 pl-5 pr-5">
    <!--clock start-->
        <div class="clock">
            <div class="wrap"></div>
                <span class="hour"></span>
                <span class="minute"></span>
                <span class="second"></span>
                <span class="dot"></span>

        </div>
        <div class="col-1"></div>

    <!--clock end-->
    </div>


<link rel="stylesheet" href="/css/clock.css" />
<script src="/js/clock.js"></script>

<!---->

<link rel="stylesheet" href="/css/vanilla-calendar.css">
<script src="/js/vanilla-calendar.js"></script>

<script src="/js/event-handlers.js"></script>

<script type="text/javascript">

    clock();

let DateToShow = new Date();
{% if today %}
DateToShow.setDate({{today.start.day}});
DateToShow.setMonth({{today.start.month-1}});
DateToShow.setYear({{today.start.year}});
{% endif %}

let myCalendar = new VanillaCalendar({
    selector: "#myCalendar",
    pastDates: 1,
    datesFilter: 0,
    onSelect: (data, elem) => { sendSelDate(data, elem) },
    date: new Date(),
    todaysDate: DateToShow,
    availableWeekDays: [
        //{day: 'monday', others: values},
    ],
    availableDates: [
        //{date: '2020-07-07', others: values},
    ],
    months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
    shortWeekday: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']

})
</script>
{% endblock %}

{% block bar %}
    <div class="col-2"></div>
            <div class="col-8">
                <div class="progress" style="height: 30px; font-size: 150%;">
                    <div id="bar" class="progress-bar progress-bar-striped bg-info progress-bar-animated" role="progressbar" style="width: 100%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
    <div class="col-2"></div>
{% endblock %}

{% block control %}
    <div class="col-1"></div>
    <div class="col-2">
        <form method="POST" action="/">
            <div class="input-group">
                <input type="number" class="form-control" id="begind" name="begind" placeholder="часов" min="1" max="16" value="{{begind}}">
                <button class="btn btn-success">Старт</button>
            </div>
        </form>
    </div>
    <div class="col-2">
        <form method="POST" action="/">
            <div class="input-group">
                <input type="number" class="form-control" id="changed" name="changed" placeholder="часов" min="0" max="16" value="0">
                <button class="btn btn-light">Изменить</button>
            </div>
        </form>
    </div>
    <div class="col-1">
        <form method="POST" action="/">
            <div class="input-group">
                <button class="btn btn-danger" name="resetd" value="true">Сбросить</button>
            </div>
        </form>
    </div>
    <div class="col-1">
        <div class="input-group">
            <button class="btn btn-light" id="paused" name="paused" value="{{is_pause}}" onclick="clickPause(value)"></button>
        </div>
    </div>
    <div class="col-2">
        <form method="POST" action="/">
            <div class="input-group">
                <button class="btn btn-light" id="finishd" name="finishd" value="{{today.done}}">Завершить</button>
            </div>
        </form>
    </div>

    <div class="col-2"></div>

<div class="row mt-3 mb-3"></div>
<div class="row"></div>


<!--dyn clock-->
<script type="text/javascript">

window.onload = showTime();
window.onload = refreshBreaks();
window.onload = setPauseLabel();
</script>
{% endblock %}
